<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SFC WhatsApp Menu</title>

<style>
body{font-family:Arial;background:#f4f4f4;margin:0;padding:15px}
h1{text-align:center;margin:5px 0}

/* Tabs */
.tabs{text-align:center;margin-bottom:15px}
.tabs button{padding:10px 18px;margin:5px;border:none;border-radius:20px;cursor:pointer}
.tabs button.active{background:#e53935;color:#fff}

/* Cards */
.menu{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px}
.card{background:#fff;padding:15px;border-radius:10px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
.price{color:#e53935;font-weight:bold;margin:5px 0}

/* Quantity */
.qty-wrap{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:8px}
.qty-btn{
 width:32px;height:32px;border:none;border-radius:50%;
 font-size:18px;background:#e53935;color:#fff;cursor:pointer
}
.qty-btn:disabled{opacity:.4;cursor:not-allowed}
.qty{width:40px;text-align:center;border:none;background:#f4f4f4}

/* Form */
.form{margin:15px 0}
input,textarea{
 width:100%;padding:10px;margin:6px 0;
 border-radius:6px;border:1px solid #ccc
}

/* Agreement */
.agree{
 display:flex;gap:8px;align-items:flex-start;
 font-size:14px;margin-top:10px
}

/* Cart bar */
.cart-bar{
 position:sticky;bottom:0;background:#fff;
 padding:10px;border-top:2px solid #ddd;
 display:flex;justify-content:space-between;align-items:center;
 font-size:16px;font-weight:bold
}
.order-btn{
 padding:12px 18px;font-size:16px;
 background:#25D366;color:#fff;border:none;border-radius:8px
}
.clear-btn{
 background:#f44336;color:#fff;
 border:none;padding:8px 12px;border-radius:6px
}

.note{text-align:center;color:#555;margin:10px 0}
</style>
</head>

<body>

<h1>SFC MENU</h1>

<div class="form">
<input id="custName" placeholder="Customer Name *">
<input id="custPhone" placeholder="Mobile Number *" type="tel">
<textarea id="custAddr" placeholder="Delivery Address *"></textarea>
<textarea id="custNote" placeholder="Order Note (optional)"></textarea>

<div class="agree">
  <input type="checkbox" id="agree">
  <label for="agree">
    I agree that once the order is placed, there is
    <b>NO RETURN / NO CANCELLATION</b>.
  </label>
</div>
</div>

<div class="tabs" id="tabs"></div>
<div class="menu" id="menu"></div>

<div class="cart-bar">
  <span>Total: ₹<span id="liveTotal">0</span></span>
  <div>
    <button class="clear-btn" onclick="clearCart()">Clear</button>
    <button class="order-btn" onclick="sendOrder()">Order</button>
  </div>
</div>

<div class="note">Delivery charge not included</div>

<script>
/* ================= ADMIN EDITABLE MENU ================= */

const MENU = {
 Burger:[
  {id:"b1",name:"SFC Chicken Fried Burger",price:100,stock:10,image:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd"},
  {id:"b2",name:"Double Ghost Fried Burger",price:180,stock:5,image:"https://images.unsplash.com/photo-1597296173397-751af4da6755"},
  {id:"b2",name:"Double Ghost Fried Burger",price:180,stock:5,image:"https://images.unsplash.com/photo-1597296173397-751af4da6755"}
 ],
 Grill:[
  {id:"g1",name:"Half Grill Chicken",price:200,stock:8,image:"https://images.unsplash.com/photo-1630315500315-43112e2bfd88"},
  {id:"g2",name:"Full Grill Chicken",price:400,stock:4,image:"https://images.unsplash.com/photo-1712579733874-c3a79f0f9d12"}
 ],
 Combo:[
  {id:"c1",name:"Combo 1",price:350,stock:6,image:"https://images.unsplash.com/photo-1604908554168-36c1a3c9df5b"}
 ],
 Others:[
  {id:"o1",name:"Chicken Soup",price:30,stock:20,image:"https://images.unsplash.com/photo-1604908177522-040d2f2b8e8c"}
 ]
};

/* ================= SYSTEM ================= */

const CART = JSON.parse(localStorage.getItem("SFC_CART") || "{}");
const menuDiv = document.getElementById("menu");
const tabsDiv = document.getElementById("tabs");
const totalSpan = document.getElementById("liveTotal");
let currentTab = Object.keys(MENU)[0];

/* Tabs */
Object.keys(MENU).forEach(cat=>{
 const b=document.createElement("button");
 b.textContent=cat;
 b.onclick=()=>{currentTab=cat;renderMenu()};
 tabsDiv.appendChild(b);
});

/* Render menu */
function renderMenu(){
 menuDiv.innerHTML="";
 [...tabsDiv.children].forEach(b=>b.classList.remove("active"));
 [...tabsDiv.children].find(b=>b.textContent===currentTab).classList.add("active");

 MENU[currentTab].forEach(item=>{
  const qty=CART[item.id]||0;
  const disablePlus=qty>=item.stock;

  menuDiv.innerHTML+=`
   <div class="card">
    <img src="${item.image}">
    <h3>${item.name}</h3>
    <div class="price">₹${item.price}</div>
    <div class="qty-wrap">
      <button class="qty-btn" onclick="updateQty('${item.id}',-1)">−</button>
      <input class="qty" value="${qty}" readonly>
      <button class="qty-btn" ${disablePlus?"disabled":""}
        onclick="updateQty('${item.id}',1)">+</button>
    </div>
   </div>`;
 });
 updateTotal();
}

/* Quantity */
function updateQty(id,delta){
 CART[id]=(CART[id]||0)+delta;
 if(CART[id]<0) CART[id]=0;
 saveCart();
 renderMenu();
}

/* Total */
function updateTotal(){
 let total=0;
 for(const cat in MENU){
  MENU[cat].forEach(i=>{
   total+=(CART[i.id]||0)*i.price;
  });
 }
 totalSpan.textContent=total;
}

/* Storage */
function saveCart(){
 localStorage.setItem("SFC_CART",JSON.stringify(CART));
}
function clearCart(){
 if(!confirm("Clear all items?")) return;
 for(const k in CART) delete CART[k];
 saveCart();
 renderMenu();
}

/* Order ID + Time */
function generateOrderId(){
 const d=new Date();
 const date=d.toISOString().slice(0,10).replace(/-/g,"");
 const rand=Math.floor(1000+Math.random()*9000);
 return `SFC-${date}-${rand}`;
}
function getTime(){
 return new Date().toLocaleString();
}

/* WhatsApp */
function sendOrder(){
 const name=custName.value.trim();
 const phone=custPhone.value.trim();
 const addr=custAddr.value.trim();
 const note=custNote.value.trim();
 const agree=document.getElementById("agree").checked;

 if(!name||!phone||!addr){
  alert("Name, mobile number and address are required");
  return;
 }
 if(!agree){
  alert("You must agree to no return / no cancellation");
  return;
 }

 const orderId=generateOrderId();
 const time=getTime();

 let msg=`Order ID: ${orderId}%0ATime: ${time}%0A`;
 msg+=`Customer: ${name}%0AMobile: ${phone}%0AAddress: ${addr}%0A`;
 if(note) msg+=`Note: ${note}%0A`;
 msg+=`%0AOrder:%0A`;

 let total=0,has=false;

 for(const cat in MENU){
  MENU[cat].forEach(i=>{
   const q=CART[i.id]||0;
   if(q>0){
    has=true;
    const amt=q*i.price;
    total+=amt;
    msg+=`${i.name} x${q} = ₹${amt}%0A`;
   }
  });
 }

 if(!has){
  alert("Cart is empty");
  return;
 }

 msg+=`%0A-----------------%0ATotal: ₹${total}%0A`;
 msg+=`No return / No cancellation agreed`;

 /* Open WhatsApp */
 const win=window.open("https://wa.me/918754743213?text="+msg,"_blank");

 /* Auto clear cart AFTER open */
 if(win){
  setTimeout(()=>{
   for(const k in CART) delete CART[k];
   saveCart();
   renderMenu();
  },1000);
 }
}

renderMenu();
</script>

</body>
</html>

